<!DOCTYPE html>
<html>
  <head>
    <title>Prologue Kelompok 4</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/main.custom.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css"
      rel="stylesheet"
    />

    <style>
      /* Tambahan untuk memastikan modal terlihat di atas video background */
      #memberModal {
        z-index: 10000; /* Lebih tinggi dari z-index video */
      }
      .member-card {
        cursor: pointer; /* Menunjukkan elemen bisa diklik */
      }
    </style>
  </head>
  <body class="is-preload">
    <audio
      id="bg-music"
      src="assets/audio/newhorizomn.mp3"
      autoplay
      loop
    ></audio>

    <button
      id="mute-btn"
      style="
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        background: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
      "
    >
      ðŸ”ˆ
    </button>

    <video autoplay muted loop id="bg-video">
      <source src="assets/video/Ep032.mp4" type="video/mp4" />
    </video>

    <div id="header">
      <div class="top">
        <div id="logo">
          <span class="image avatar48"
            ><img src="assets/fanteses.jpg" alt=""
          /></span>
          <h1 id="title">Kelompok 4</h1>
          <p>Web Design</p>
        </div>
        <nav id="nav">
          <ul>
            <li>
              <a href="#top" id="top-link"
                ><span class="icon solid fa-home">Intro</span></a
              >
            </li>
            <li>
              <a href="#members" id="portfolio-link"
                ><span class="icon solid fa-th">Members</span></a
              >
            </li>
            <li>
              <a href="#about" id="about-link"
                ><span class="icon solid fa-user">About Us</span></a
              >
            </li>
            <li>
              <a href="#contact" id="contact-link"
                ><span class="icon solid fa-envelope">Contact</span></a
              >
            </li>
          </ul>
        </nav>
      </div>
      <div class="bottom">
        <ul class="icons">
          <li>
            <a href="#" class="icon brands fa-twitter"
              ><span class="label">Twitter</span></a
            >
          </li>
          <li>
            <a href="#" class="icon brands fa-facebook-f"
              ><span class="label">Facebook</span></a
            >
          </li>
          <li>
            <a href="#" class="icon brands fa-github"
              ><span class="label">Github</span></a
            >
          </li>
          <li>
            <a href="#" class="icon brands fa-dribbble"
              ><span class="label">Dribbble</span></a
            >
          </li>
          <li>
            <a href="#" class="icon solid fa-envelope"
              ><span class="label">Email</span></a
            >
          </li>
        </ul>
      </div>
    </div>

    <div id="main">
      <section id="top" class="one dark cover">
        <div class="container">
          <header>
            <h2 class="alt">
              Welcome To<strong> WEB</strong>
              <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">Page!</a>
              ini<br />
              adalah Page yang di design dari
              <a href="http://html5up.net">HTML5 UP</a>.
            </h2>
            <p>
              Website ini di design ulang oleh<br />
              Kelompok 4
            </p>
          </header>
          <footer>
            <a href="#members" class="button scrolly">MEET OUR TEAM!</a>
          </footer>
        </div>
      </section>

      <section
        id="members"
        class="min-h-screen bg-white text-gray-900 px-8 py-20"
      >
        <h2 class="text-4xl font-bold text-center mb-16 text-gray-900">
          Members
        </h2>
        <div
          id="memberGrid"
          class="grid grid-cols-1 md:grid-cols-2 gap-12 max-w-5xl mx-auto"
        >
          <div
            class="member-card bg-gray-100 rounded-2xl overflow-hidden shadow-xl"
            data-member-name="Rifqy"
            data-member-quote='"lah kirain pake ppt"'
            data-member-image="assets/dawg-skull-emoji.gif"
            data-member-details="Seorang yang penuh semangat dan selalu ingin tahu akan hal baru. Suka bereksperimen dengan teknologi terkini."
          >
            <img
              src="assets/dawg-skull-emoji.gif"
              alt="Rifqy"
              class="w-full h-40 object-cover"
            />
            <div class="p-6">
              <h3 class="text-2xl font-bold mb-3">Rifqy</h3>
              <p class="text-gray-700 text-lg font-extrabold">
                "lah kirain pake ppt"
              </p>
            </div>
          </div>
        </div>
      </section>

      <section id="about" class="three">
        <div class="container">
          <header>
            <h2 class="text-white">About Us</h2>
          </header>
          <a href="#" class="image featured"
            ><img src="images/pic08.jpg" alt=""
          /></a>
          <p class="text-white">
            Kami adalah tim muda yang lahir dan tumbuh di era digitalâ€”generasi
            yang melek teknologi, kreatif, dan adaptif. Kami menggabungkan
            profesionalisme dengan cara kerja yang lebih fresh, fleksibel, dan
            penuh ide-ide baru.<br /><br />
            Setiap proyek kami kerjakan dengan totalitas, dari ngoding, desain,
            sampai editingâ€”semua dijalani dengan passion dan mindset
            kolaboratif. Kami percaya kerja nggak harus kaku, yang penting
            hasilnya rapi, cepat, dan impactful.<br /><br />
            Kalau kamu butuh tim yang serius tapi santai, kreatif tapi tetap
            on-trackâ€”kami hadir sebagai solusi yang kekinian dan bisa
            diandalkan.
          </p>
        </div>
      </section>

      <section id="contact" class="four">
        <div class="container">
          <header>
            <h2 class="text-white">Contact</h2>
          </header>
          <p class="text-4xl mb-4 text-white">
            Contact disini jika ada keperluan!
          </p>
          <form method="post" action="#">
            <div class="row">
              <div class="mx-auto">
                <input
                  type="text"
                  name="name"
                  placeholder="Name"
                  class="text-sm py-2 px-3 w-full mb-4 rounded border border-gray-300"
                />
                <input
                  type="text"
                  name="email"
                  placeholder="Email"
                  class="text-sm py-2 px-3 w-full mb-4 rounded border border-gray-300"
                />
              </div>
              <div class="col-12">
                <textarea
                  name="message"
                  placeholder="Message"
                  class="mb-4 mx-auto max-w-md"
                ></textarea>
              </div>
              <div class="col-12">
                <input type="submit" value="Send Message" />
              </div>
            </div>
          </form>
        </div>
      </section>
    </div>

    <div id="footer">
      <ul class="copyright">
        <li class="text-white">Â© Untitled. All rights reserved.</li>
        <li class="text-white">
          Design: <a href="http://html5up.net" class="text-white">HTML5 UP</a>
        </li>
        <li class="text-white">
          <a href="login.html" class="text-white hover:underline"
            >Admin Login</a
          >
        </li>
      </ul>
    </div>

    <div
      id="memberModal"
      class="fixed inset-0 bg-gray-900 bg-opacity-75 overflow-y-auto h-full w-full flex items-center justify-center hidden"
    >
      <div
        class="bg-white p-6 md:p-8 rounded-lg shadow-xl w-11/12 md:w-full max-w-md mx-auto relative"
      >
        <button
          id="closeModalBtn"
          class="absolute top-4 right-4 text-gray-600 hover:text-gray-900 text-3xl font-bold"
        >
          Ã—
        </button>
        <div class="text-center">
          <img
            id="modalMemberImage"
            src=""
            alt="Member Image"
            class="w-32 h-32 md:w-40 md:h-40 object-cover rounded-full mx-auto mb-4 border-4 border-gray-300"
          />
          <h2
            id="modalMemberName"
            class="text-2xl md:text-3xl font-bold text-gray-800 mb-2"
          ></h2>
          <p
            id="modalMemberQuote"
            class="text-md md:text-lg italic text-gray-600 mb-4 px-4"
          ></p>
        </div>
        <div class="border-t border-gray-200 pt-4">
          <h4 class="text-lg font-semibold text-gray-700 mb-2">Details:</h4>
          <p
            id="modalMemberDetails"
            class="text-gray-700 text-sm md:text-base"
          ></p>
        </div>
      </div>
    </div>

    <a
      href="login.html"
      id="hiddenAdminLoginBtn"
      style="
        display: none;
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #2d3748;
        color: white;
        padding: 10px 18px;
        border-radius: 8px;
        text-decoration: none;
        z-index: 10001;
        box-shadow: 0 4px 14px 0 rgba(0, 0, 0, 0.4);
        font-size: 14px;
      "
    >
      Zugang Admin
    </a>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
    <script>
      // Di bagian script index.html
      const defaultMembers = [
        {
          name: "Rifqy",
          quote: '"lah kirain pake ppt"',
          image: "assets/dawg-skull-emoji.gif",
          details:
            "Seorang yang penuh semangat dan selalu ingin tahu akan hal baru. Suka bereksperimen dengan teknologi terkini.",
        },
        {
          name: "Damar",
          quote: '"Throughout Heaven and Earth, I alone am honored"',
          image: "assets/jjk-freaky.gif",
          details:
            "Pemikir strategis dengan pandangan yang mendalam. Kutipan favoritnya mencerminkan kepercayaan dirinya.",
        },
        {
          name: "Alfian",
          quote: '"im the man in the box ðŸ¥€"',
          image: "assets/gus-gusfring.gif",
          details:
            "Dikenal dengan gayanya yang unik dan terkadang misterius. Selalu punya perspektif yang menarik.",
        },
        {
          name: "Dipa",
          quote: '"Ugh"',
          image: "assets/rigbycat-rigby.gif",
          details:
            "Singkat, padat, dan jelas. Pribadi yang efisien dan tidak suka bertele-tele, seperti kutipannya.",
        },
        {
          name: "Imron",
          quote: '"nothin."',
          image: "assets/wielino.png",
          details:
            "Tenang namun penuh dengan ide-ide brilian. Lebih suka tindakan nyata daripada banyak bicara.",
        },
        {
          name: "Abiem",
          quote: '"Yang Sudah Blh Pulang."',
          image: "assets/budi.png",
          details:
            "Efisien dan selalu to the point. Fokus pada penyelesaian tugas dengan cepat dan tepat.",
        },
      ];

      async function getMembersData() {
        try {
          const response = await fetch("/api/members");
          const data = await response.json();
          console.log("Data dari server:", data); // <- DEBUG
          localStorage.setItem("membersData", JSON.stringify(data));
          return data;
        } catch (err) {
          console.error("Fetch error:", err);
          const fallback = localStorage.getItem("membersData");
          if (fallback) return JSON.parse(fallback);
          return defaultMembers;
        }
      }

      function renderMembersToDOM(membersToRender) {
        const memberGrid = document.getElementById("memberGrid");
        if (!memberGrid) {
          console.error("Elemen dengan ID 'memberGrid' tidak ditemukan!");
          return;
        }

        memberGrid.innerHTML = ""; // Kosongkan grid sebelum mengisi

        membersToRender.forEach((member) => {
          const card = document.createElement("div");
          card.className =
            "member-card bg-gray-100 rounded-2xl overflow-hidden shadow-xl";
          // Atur dataset untuk modal
          card.dataset.memberName = member.name;
          card.dataset.memberQuote = member.quote;
          card.dataset.memberImage = member.image;
          card.dataset.memberDetails = member.details;

          card.innerHTML = `
            <img src="${member.image}" alt="${member.name}" class="w-full h-40 object-cover">
            <div class="p-6">
              <h3 class="text-2xl font-bold mb-3">${member.name}</h3>
              <p class="text-gray-700 text-lg font-extrabold">${member.quote}</p>
            </div>
          `;

          memberGrid.appendChild(card);
        });
      }

      // Background Music Mute Button
      const music = document.getElementById("bg-music");
      const muteBtn = document.getElementById("mute-btn");
      if (music && muteBtn) {
        music.volume = 0.2;
        muteBtn.addEventListener("click", function () {
          if (music.muted) {
            music.muted = false;
            muteBtn.textContent = "ðŸ”ˆ";
          } else {
            music.muted = true;
            muteBtn.textContent = "ðŸ”‡";
          }
        });
      }

      document.addEventListener("DOMContentLoaded", async () => {
        const membersData = await getMembersData(); // âœ… tunggu data diambil dulu
        renderMembersToDOM(membersData); // âœ… baru render pas data udah siap

        // Setelah card selesai dirender, baru ambil ulang elemen DOM-nya
        const memberCards = document.querySelectorAll(".member-card");
        const modal = document.getElementById("memberModal");
        const closeModalBtn = document.getElementById("closeModalBtn");

        const modalMemberName = document.getElementById("modalMemberName");
        const modalMemberImage = document.getElementById("modalMemberImage");
        const modalMemberQuote = document.getElementById("modalMemberQuote");
        const modalMemberDetails =
          document.getElementById("modalMemberDetails");

        if (
          !modal ||
          !closeModalBtn ||
          !modalMemberName ||
          !modalMemberImage ||
          !modalMemberQuote ||
          !modalMemberDetails
        ) {
          console.error("Salah satu elemen modal tidak ditemukan!");
          return;
        }

        // Pasang event listener setelah elemen member-card dirender
        memberCards.forEach((card) => {
          card.addEventListener("click", () => {
            modalMemberName.textContent = card.dataset.memberName;
            modalMemberImage.src = card.dataset.memberImage;
            modalMemberQuote.textContent = card.dataset.memberQuote;
            modalMemberDetails.textContent = card.dataset.memberDetails;

            modal.classList.remove("hidden");
          });
        });

        closeModalBtn.addEventListener("click", () => {
          modal.classList.add("hidden");
        });
      });

      // Member Modal Functionality
      document.addEventListener("DOMContentLoaded", () => {
        // Initialize members data
        const membersData = getMembersData();
        renderMembersToDOM(membersData); // Render data dari localStorage

        // Pindahkan query selector dan event listener modal ke sini SETELAH renderMembersToDOM
        // agar listener terpasang pada elemen yang baru dibuat.
        const memberCards = document.querySelectorAll(".member-card");
        const modal = document.getElementById("memberModal");
        const closeModalBtn = document.getElementById("closeModalBtn");

        const modalMemberName = document.getElementById("modalMemberName");
        const modalMemberImage = document.getElementById("modalMemberImage");
        const modalMemberQuote = document.getElementById("modalMemberQuote");
        const modalMemberDetails =
          document.getElementById("modalMemberDetails");

        if (
          !modal ||
          !closeModalBtn ||
          !modalMemberName ||
          !modalMemberImage ||
          !modalMemberQuote ||
          !modalMemberDetails
        ) {
          console.error("Salah satu elemen modal tidak ditemukan!");
          return;
        }

        memberCards.forEach((card) => {
          card.addEventListener("click", () => {
            const name = card.dataset.memberName;
            const image = card.dataset.memberImage;
            const quote = card.dataset.memberQuote;
            const details = card.dataset.memberDetails;

            modalMemberName.textContent = name;
            modalMemberImage.src = image;
            modalMemberImage.alt = name;
            modalMemberQuote.textContent = quote;
            modalMemberDetails.textContent = details;

            modal.classList.remove("hidden");
            document.body.style.overflow = "hidden";
          });
        });

        function closeModal() {
          modal.classList.add("hidden");
          document.body.style.overflow = "";
        }

        closeModalBtn.addEventListener("click", closeModal);

        modal.addEventListener("click", (event) => {
          if (event.target === modal) {
            closeModal();
          }
        });

        document.addEventListener("keydown", (event) => {
          if (event.key === "Escape" && !modal.classList.contains("hidden")) {
            closeModal();
          }
        });

        // --- Script untuk Tombol Admin Tersembunyi ---
        let keySequence = [];
        // Urutan tombol: 'a', 'd', 'm', 'i', 'n' (semua huruf kecil)
        const adminCode = ["a", "d", "m", "i", "n"];

        document.addEventListener("keydown", function (event) {
          const key = event.key.toLowerCase(); // Ambil tombol yang ditekan & ubah ke huruf kecil

          if (key.length === 1 && key >= "a" && key <= "z") {
            keySequence.push(key);
          }

          keySequence = keySequence.slice(-adminCode.length);

          if (
            keySequence.length === adminCode.length &&
            keySequence.every((val, index) => val === adminCode[index])
          ) {
            const hiddenBtn = document.getElementById("hiddenAdminLoginBtn");
            if (hiddenBtn) {
              hiddenBtn.style.display = "inline-block"; // Tampilkan tombol
            }
            keySequence = []; // Reset urutan setelah berhasil
          }
        });
        // --- Akhir Script Tombol Admin Tersembunyi ---
      });
    </script>
  </body>
</html>
